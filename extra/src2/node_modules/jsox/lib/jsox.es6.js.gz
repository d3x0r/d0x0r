var e,t=(function(e,t){const n=JSON,r=t;r.version="1.2.108",function(){const e="function"==typeof BigInt,t=["ab","u8","cu8","s8","u16","s16","u32","s32","u64","s64","f32","f64"];let s=null,a=null;const i=[ArrayBuffer,Uint8Array,Uint8ClampedArray,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,null,null,Float32Array,Float64Array],l={true:!0,false:!1,null:null,NaN:NaN,Infinity:1/0,undefined:void 0},o=[];function c(){let e=o.pop();return e||(e={context:0,current_proto:null,current_class:null,current_class_field:0,arrayType:-1,valueType:0,elements:null}),e}function u(e){o.push(e)}const f=[];function p(e){f.push(e)}r.escape=function(e){let t,n="";if(!e)return e;for(t=0;t<e.length;t++)'"'!=e[t]&&"\\"!=e[t]&&"`"!=e[t]&&"'"!=e[t]||(n+="\\"),n+=e[t];return n};let g=new WeakMap,h=new Map,b=new Map,y=[];r.reset=function(){g=new WeakMap,h=new Map,b=new Map,y=[]},r.begin=function(n,r){const s={name:null,value_type:0,string:"",contains:null,className:null},a={line:1,col:1};let l,o=0,g=new Map,h=0,y=!0,d=!1,m=!1,v=null,k=null,w=void 0,x={first:null,last:null,saved:null,push(e){let t=this.saved;t?(this.saved=t.next,t.node=e,t.next=null,t.prior=this.last):t={node:e,next:null,prior:this.last},this.last?this.last.next=t:this.first=t,this.last=t,this.length++},pop(){let e=this.last;return(this.last=e.prior)||(this.first=null),e.next=this.saved,this.last&&(this.last.next=null),e.next||(e.first=null),this.saved=e,this.length--,e.node},length:0},N=[],O={},j=null,S=null,E=0,A=-1,I=0,T=0,D=!1,P=!1,C=!1,M=!1,X=!1,J={first:null,last:null,saved:null,push(e){let t=this.saved;t?(this.saved=t.next,t.node=e,t.next=null,t.prior=this.last):t={node:e,next:null,prior:this.last},this.last?this.last.next=t:this.first=t,this.last=t},shift(){let e=this.first;return e?((this.first=e.next)||(this.last=null),e.next=this.saved,this.saved=e,e.node):null},unshift(e){let t=this.saved;this.saved=t.next,t.node=e,t.next=this.first,t.prior=null,this.first||(this.last=t),this.first=t}},F=null,$=!1,U=!1,B=!1,q=!1,R=!1,H=!1,W=!1,z=0,L=0,Y=!1,G=!1,V=!1;function K(e){throw new Error(`${e} at ${o} [${a.line}:${a.col}]`)}return{fromJSOX(e,t,n){if(g.get(e))throw new Error("Existing fromJSOX has been registered for prototype");if(t||(t=function(){}),t&&!("constructor"in t))throw new Error("Please pass a prototype like thing...");g.set(e,{protoCon:t.prototype.constructor,cb:n})},registerFromJSOX(e,t){throw new Error("registerFromJSOX is deprecated, please update to use fromJSOX instead:"+e+t.toString())},finalError(){0!==T&&(1===T&&K("Comment began at end of document"),3===T&&K("Open comment '/*' is missing close at end of document"),4===T&&K("Incomplete '/* *' close at end of document")),$&&K("Incomplete string")},value(){this.finalError();let e=v;return v=void 0,e},reset(){h=0,y=!0,J.last&&(J.last.next=J.save),J.save=J.first,J.first=J.last=null,x.last&&(x.last.next=x.save),x.length=0,x.save=J.first,x.first=x.last=null,w=void 0,I=0,N=[],O={},j=null,S=null,E=0,s.value_type=0,s.name=null,s.string="",s.className=null,a.line=1,a.col=1,m=!1,T=0,Y=!1,$=!1,B=!1,q=!1,G=!1},usePrototype(e,t){O[e]=t},write(e){let t;if("string"!=typeof e&&void 0!==e&&(e=String(e)),!y)throw new Error("Parser is still in an error state, please reset before resuming");for(t=this._write(e,!1);t>0&&("function"==typeof r&&function e(t,n){let s,a,i=t[n];if(i&&"object"==typeof i)for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a=e(i,s),void 0!==a?i[s]=a:delete i[s]);return r.call(t,n,i)}({"":v},""),v=n(v),!(t<2));t=this._write());},_write(n,r){let O,K,Q,Z=0;function ee(e,t){throw new Error(`${e} '${String.fromCodePoint(t)}' unexpected at ${o} (near '${Q.substr(o>4?o-4:0,o>4?3:o-1)}[${String.fromCodePoint(t)}]${Q.substr(o,10)}') [${a.line}:${a.col}]`)}function te(){s.value_type=0,s.string="",s.contains=null}function ne(){let t=null;switch(s.value_type){case 5:if(!(s.string.length>13||13==s.string.length&&s[0]>"2")||G||X||M||P||(V=!0),V){if(e)return BigInt(s.string);throw new Error("no builtin BigInt()",0)}if(G){const e=new Date(s.string);return isNaN(e.getTime())&&ee("Bad number format",O),e}return(m?-1:1)*Number(s.string);case 4:if(s.className){if(t=g.get(s.className),t||(t=b.get(s.className)),t&&t.cb)return s.className=null,t.cb.call(s.string);throw new Error("Double string error, no constructor for: new "+s.className+"("+s.string+")")}return s.string;case 2:return!0;case 3:return!1;case 7:case 8:return NaN;case 9:return-1/0;case 10:return 1/0;case 1:return null;case-1:case 12:return;case 6:return s.className&&(t=g.get(s.className),t||(t=b.get(s.className)),s.className=null,t&&t.cb)?s.contains=t.cb.call(s.contains):s.contains;case 13:if(A>=0){let e;if(e=s.contains.length?_(s.contains[0]):_(s.string),0===A)return A=-1,e;{const t=new i[A](e);return A=-1,t}}if(-2===A){let e,t=k;const n=s.contains.length;for(e=0;e<n;e++){const r=s.contains[e];let a=t[r];if(!a){let r=x.first,i=0;for(;r&&i<n&&i<x.length;){const n=s.contains[i];if(n in t)break;if(r.next)if("number"==typeof n){const e=r.next.node.elements,s=r.next.node.elements;if(e&&n>=e.length){if(i===s.length-1){console.log("This is actually at the current object so use that"),a=w;break}if(r.next.next&&n===e.length){a=r.next.next.node.elements,r=r.next,i++,t=a;continue}a=w,i++;break}}else{if(n!==r.next.node.name){a=r.next.node.elements[n],e=i;break}a=13===r.next.node.valueType?r.next.node.elements_array:r.next.node.elements[n]}else a=a[n];r=r.next,i++}e=i<n?i-1:i}if(!a)throw new Error("Path did not resolve properly:"+s.contains+" at "+r+"("+e+")");t=a}return A=-3,t}return s.className&&(t=g.get(s.className),t||(t=b.get(s.className)),s.className=null,t&&t.cb)?t.cb.call(s.contains):s.contains;default:console.log("Unhandled value conversion.",s)}}function re(){if(-3==A)return 6===s.value_type&&w.push(s.contains),void(A=-1);switch(s.value_type){case 12:w.push(void 0),delete w[w.length-1];break;default:w.push(ne())}te()}function se(){if(-3===A&&13===s.value_type)return te(),void(A=-1);if(12===s.value_type)return;!s.name&&S&&(s.name=S.fields[E++]);let e=ne();j&&j.protoDef&&j.protoDef.cb?(e=j.protoDef.cb.call(w,s.name,e),e&&(w[s.name]=e)):w[s.name]=e,te()}function ae(e){if(0!==h){switch(m&&ee("Negative outside of quotes, being converted to a string (would lose count of leading '-' characters)",e),h){case 31:switch(s.value_type){case 2:s.string+="true";break;case 3:s.string+="false";break;case 1:s.string+="null";break;case 10:s.string+="Infinity";break;case 9:s.string+="-Infinity",ee("Negative outside of quotes, being converted to a string",e);break;case 8:s.string+="NaN";break;case 7:s.string+="-NaN",ee("Negative outside of quotes, being converted to a string",e);break;case-1:s.string+="undefined";break;case 4:case 0:break;default:console.log("Value of type "+s.value_type+" is not restored...")}break;case 1:s.string+="t";break;case 2:s.string+="tr";break;case 3:s.string+="tru";break;case 5:s.string+="f";break;case 6:s.string+="fa";break;case 7:s.string+="fal";break;case 8:s.string+="fals";break;case 9:s.string+="n";break;case 10:s.string+="nu";break;case 11:s.string+="nul";break;case 12:s.string+="u";break;case 13:s.string+="un";break;case 14:s.string+="und";break;case 15:s.string+="unde";break;case 16:s.string+="undef";break;case 17:s.string+="undefi";break;case 18:s.string+="undefin";break;case 19:s.string+="undefine";break;case 20:s.string+="M";break;case 21:s.string+="Na";break;case 22:s.string+="I";break;case 23:s.string+="In";break;case 24:s.string+="Inf";break;case 25:s.string+="Infi";break;case 26:s.string+="Infin";break;case 27:s.string+="Infini";break;case 28:s.string+="Infinit";break;case 0:case 29:case 30:break;case 32:ee("String-keyword recovery fail (after whitespace)",e)}s.value_type=4,h<29&&(h=31)}else h=31,s.value_type=4;if(123==e)oe();else if(91==e)ce();else if(44==e);else{if(32==e||13==e||10==e||9==e||65279==e||8232==e||8233==e)return;44==e||125==e||93==e||58==e?ee("Invalid character near identifier",e):s.string+=l}}function ie(e){let t=0;for(;0==t&&o<Q.length;){l=Q.charAt(o);let n=Q.codePointAt(o++);if(n>=65536&&(l+=Q.charAt(o),o++),a.col++,n==e)B?(W?ee("Incomplete hexidecimal sequence",n):H?ee("Incomplete long unicode sequence",n):R&&ee("Incomplete unicode sequence",n),q?(q=!1,t=1):s.string+=l,B=!1):t=1;else if(B){if(R){if(125==n){s.string+=String.fromCodePoint(z),R=!1,H=!1,B=!1;continue}if(z*=16,n>=48&&n<=57)z+=n-48;else if(n>=65&&n<=70)z+=n-65+10;else{if(!(n>=97&&n<=102)){ee("(escaped character, parsing hex of \\u)",n),t=-1,R=!1,B=!1;continue}z+=n-97+10}continue}if(W||H){if(0===L&&123===n){R=!0;continue}if(L<2||H&&L<4){if(z*=16,n>=48&&n<=57)z+=n-48;else if(n>=65&&n<=70)z+=n-65+10;else{if(!(n>=97&&n<=102)){ee(H?"(escaped character, parsing hex of \\u)":"(escaped character, parsing hex of \\x)",n),t=-1,W=!1,B=!1;continue}z+=n-97+10}L++,H?4==L&&(s.string+=String.fromCodePoint(z),H=!1,B=!1):2==L&&(s.string+=String.fromCodePoint(z),W=!1,B=!1);continue}}switch(n){case 13:q=!0,a.col=1;continue;case 8232:case 8233:a.col=1;case 10:q?q=!1:a.col=1,a.line++;break;case 116:s.string+="\t";break;case 98:s.string+="\b";break;case 110:s.string+="\n";break;case 114:s.string+="\r";break;case 102:s.string+="\f";break;case 118:s.string+="\v";break;case 48:s.string+="\0";break;case 120:W=!0,L=0,z=0;continue;case 117:H=!0,L=0,z=0;continue;default:s.string+=l}B=!1}else 92===n?B?(s.string+="\\",B=!1):(B=!0,z=0,L=0):(q&&(q=!1,a.line++,a.col=2),s.string+=l)}return t}function le(){let e;for(;(e=o)<Q.length;){l=Q.charAt(e);let t=Q.codePointAt(o++);if(t>=256){o=e;break}if(95!=t)if(a.col++,t>=48&&t<=57)C&&(X=!0),s.string+=l;else if(45==t||43==t)0==s.string.length||C&&!M&&!X?(45!=t||C||(m=!m),s.string+=l,M=!0):(s.string+=l,G=!0);else{if(78==t){if(0==h)return U=!1,void(h=20);ee("fault while parsing number;",t);break}if(73==t){if(0==h)return U=!1,void(h=22);ee("fault while parsing number;",t);break}if(58==t&&G)s.string+=l,G=!0;else if(84==t&&G)s.string+=l,G=!0;else if(90==t&&G)s.string+=l,G=!0;else if(46==t){if(P||D||C){y=!1,ee("fault while parsing number;",t);break}s.string+=l,P=!0}else{if(110==t){V=!0;break}if(D&&(t>=95&&t<=102||t>=65&&t<=70))s.string+=l;else if(120==t||98==t||111==t||88==t||66==t||79==t){if(D||"0"!=s.string){y=!1,ee("fault while parsing number;",t);break}D=!0,s.string+=l}else{if(101!=t&&69!=t){if(32==t||13==t||10==t||9==t||47==t||35==t||44==t||125==t||93==t||123==t||91==t||34==t||39==t||96==t||58==t){o=e;break}r&&(y=!1,ee("fault while parsing number;",t));break}if(C){y=!1,ee("fault while parsing number;",t);break}s.string+=l,C=!0}}}}r||o!=Q.length?(U=!1,s.value_type=5,0==I&&(Y=!0)):U=!0}function oe(){let e,t=2,n=null,r={};if(h>0&&h<29&&ae(123),e=ue(),0==I)if(29==h||31==h&&(e||s.string.length)){if(e&&e.protoDef&&e.protoDef.protoCon&&(r=new e.protoDef.protoCon),!e||!e.protoDef&&s.string){if(n=N.find(e=>e.name===s.string),n)d?(n.fields.length=0,t=4):(r=new n.protoCon,t=5);else{function a(){}N.push(n={name:s.string,protoCon:e&&e.protoDef&&e.protoDef.protoCon||a.constructor,fields:[]}),t=4}d=!1}S=n,h=0}else h=29;else if(29==h||1===I||3===I||5==I)if(0!=h||4==s.value_type){if(e&&e.protoDef)r=new e.protoDef.protoCon;else if(n=N.find(e=>e.name===s.string),n)t=5,r={};else{function a(){}g.set(s.string,{protoCon:a.prototype.constructor,cb:null}),r=new a}h=0}else h=0;else if(2==I&&0==h)return ee("fault while parsing; getting field name unexpected ",O),y=!1,!1;let i=c();return s.value_type=6,0===I?w=r:1==I||3!=I&&5!=I||(!s.name&&S&&(s.name=S.fields[E++]),w[s.name]=r),i.context=I,i.elements=w,i.name=s.name,i.current_proto=j,i.current_class=S,i.current_class_field=E,i.valueType=s.value_type,i.arrayType=A,i.className=s.className,s.className=null,s.name=null,j=e,S=n,E=0,w=r,k||(k=w),x.push(i),te(),I=t,!0}function ce(){if(h>0&&h<29&&ae(91),31==h&&s.string.length){let e=t.findIndex(e=>e===s.string);e>=0?(h=0,A=e,s.className=s.string,s.string=null):"ref"===s.string?(s.className=null,A=-2):g.get(s.string)||b.get(s.string)?s.className=s.string:ee(`Unknown type '${s.string}' specified for array`,O)}else if(2==I||29==h||30==h)return ee("Fault while parsing; while getting field name unexpected",O),y=!1,!1;{let e=c();s.value_type=13;let t=[];if(0==I)w=t;else if(1==I)-1==A&&w.push(t);else if(3==I)if(s.name||(console.log("This says it's resolved......."),A=-3),j&&j.protoDef)if(j.protoDef.cb){const e=j.protoDef.cb.call(w,s.name,t);void 0!==e&&(t=w[s.name]=e)}else w[s.name]=t;else w[s.name]=t;e.context=I,e.elements=w,e.name=s.name,e.current_proto=j,e.current_class=S,e.current_class_field=E,e.valueType=s.value_type,e.arrayType=-1==A?-3:A,e.className=s.className,A=-1,s.className=null,s.name=null,j=null,S=null,E=0,w=t,k||(k=t),x.push(e),te(),I=1}return!0}function ue(){const e={protoDef:null,cls:null};return((e.protoDef=g.get(s.string))||(e.protoDef=b.get(s.string)))&&(s.className||(s.className=s.string,s.string=null)),s.string&&(e.cls=N.find(e=>e.name===s.string)),e.protoDef||e.cls?e:null}if(!y)return-1;for(n&&n.length?(K=function(){let e=f.pop();return e?e.n=0:e={buf:null,n:0},e}(),K.buf=n,J.push(K)):(U&&(U=!1,s.value_type=5,0==I&&(Y=!0),Z=1),0!==I&&ee("Unclosed object at end of stream.",O));y&&(K=J.shift());){if(o=K.n,Q=K.buf,$){let e=ie(F);e<0?y=!1:e>0&&($=!1,y&&(s.value_type=4))}for(U&&le();!Y&&y&&o<Q.length;)if(l=Q.charAt(o),O=Q.codePointAt(o++),O>=65536&&(l+=Q.charAt(o),o++),a.col++,T)if(1==T)if(42==O)T=3;else{if(47!=O)return ee("fault while parsing;",O);T=2}else 2==T?10!=O&&13!=O||(T=0):3==T?42==O&&(T=4):T=47==O?0:3;else{switch(O){case 47:T=1;break;case 123:oe();break;case 91:ce();break;case 58:if(5==I)h=0,s.name=s.string,s.string="",s.value_type=0;else if(2==I||4==I)if(4==I){if(!Object.keys(w).length){console.log("This is a full object, not a class def...",s.className);const e=()=>{};g.set(x.last.node.current_class.name,{protoCon:e.prototype.constructor,cb:null}),w=new e,I=3,s.name=s.string,h=0,s.string="",s.value_type=0,console.log("don't do default;s do a revive...")}}else 0!=h&&31!=h&&29!=h&&30!=h&&ae(32),h=0,s.name=s.string,s.string="",I=2===I?3:6,s.value_type=0;else{if(0==I){console.log("Override colon found, allow class redefinition",I),d=!0;break}ee(1==I?"(in array, got colon out of string):parsing fault;":3==I?"String unexpected":"(outside any object, got colon out of string):parsing fault;",O),y=!1}break;case 125:if(31==h&&(h=0),4==I)if(S){s.string&&S.fields.push(s.string),te();let e=x.pop();I=0,h=0,s.name=e.name,w=e.elements,S=e.current_class,E=e.current_class_field,A=e.arrayType,s.value_type=e.valueType,s.className=e.className,k=null,u(e)}else ee("State error; gathering class fields, and lost the class",O);else if(2==I||5==I){0!=s.value_type&&(S&&(s.name=S.fields[E++]),se()),s.value_type=6,j&&j.protoDef&&(console.log("SOMETHING SHOULD AHVE BEEN REPLACED HERE??",j),console.log("The other version only revives on init"),w=new j.protoDef.cb(w,void 0,void 0)),s.contains=w,s.string="";let e=x.pop();I=e.context,s.name=e.name,w=e.elements,S=e.current_class,j=e.current_proto,E=e.current_class_field,A=e.arrayType,s.value_type=e.valueType,s.className=e.className,u(e),0==I&&(Y=!0)}else if(3==I){0===s.value_type&&ee("Fault while parsing; unexpected",O),se(),s.value_type=6,s.contains=w,h=0;let e=x.pop();I=e.context,s.name=e.name,w=e.elements,j=e.current_proto,S=e.current_class,E=e.current_class_field,A=e.arrayType,s.value_type=e.valueType,s.className=e.className,u(e),0==I&&(Y=!0)}else ee("Fault while parsing; unexpected",O),y=!1;m=!1;break;case 93:if(h>=30&&(h=0),1==I){0!=s.value_type&&(s.name&&console.log("Ya this should blow up"),re()),s.contains=w;{let e=x.pop();s.name=e.name,s.className=e.className,I=e.context,w=e.elements,j=e.current_proto,S=e.current_class,E=e.current_class_field,A=e.arrayType,s.value_type=e.valueType,u(e)}s.value_type=13,0==I&&(Y=!0)}else ee(`bad context ${I}; fault while parsing`,O),y=!1;m=!1;break;case 44:h<30&&0!=h&&ae(O),31!=h&&29!=h||(h=0),4==I?S?(S.fields.push(s.string),s.string="",h=29):ee("State error; gathering class fields, and lost the class",O):2==I?S?(s.name=S.fields[E++],0!=s.value_type&&(se(),te())):(s.string||s.value_type)&&ee("State error; comma in field name and/or lost the class",O):5==I?(S?(-3==A||s.name||(s.name=S.fields[E++]),0!=s.value_type&&(-3!=A&&se(),te())):0!=s.value_type&&(se(),te()),s.name=null):1==I?(0==s.value_type&&(s.value_type=12),re(),te(),h=0):3==I&&0!=s.value_type?(I=2,0!=s.value_type&&(se(),te()),h=0):(y=!1,ee("bad context; excessive commas while parsing;",O)),m=!1;break;default:switch(O){default:if(0!=I&&(3!=I||29!=h)&&2!=I&&29!=h&&4!=I){if(0==h&&(O>=48&&O<=57||43==O||46==O||45==O))D=!1,C=!1,G=!1,V=!1,M=!1,X=!1,P=!1,s.string=l,K.n=o,le();else if(0==s.value_type)0!=h?ae(O):(h=31,s.string+=l,s.value_type=4);else if(2==I)ee("Multiple values found in field name",O);else if(3==I)4!=s.value_type&&(6!=s.value_type&&13!=s.value_type||ee("String unexpected",O),ae(O)),30==h?ue()?s.string=l:ee("String unexpected",O):31==h?s.string+=l:ee("String unexpected",O);else if(1==I){if(30==h){s.className||(s.className=s.string,s.string=""),s.string+=l;break}31==h&&(s.string+=l)}break}switch(O){case 96:case 34:case 39:0==h||29==h?(s.string.length&&(console.log("IN ARRAY AND FIXING?"),s.className=s.string,s.string=""),ie(O)?s.value_type=4:(F=O,$=!0)):ee("fault while parsing; quote not at start of field name",O);break;case 10:a.line++,a.col=1;case 13:case 32:case 8232:case 8233:case 9:case 65279:if(0===I&&31===h){h=0,0===I&&(Y=!0);break}if(0===h||30===h){0==I&&s.value_type&&(Y=!0);break}if(29===h){if(0===I){h=0,Y=!0;break}s.string.length&&console.log("STEP TO NEXT TOKEN."),h=30}else y=!1,ee("fault while parsing; whitepsace unexpected",O);break;default:if(0==h&&(O>=48&&O<=57||43==O||46==O||45==O)){D=!1,C=!1,G=!1,V=!1,M=!1,X=!1,P=!1,s.string=l,K.n=o,le();break}if(30===h&&(y=!1,ee("fault while parsing; character unexpected",O)),0===h){h=29,s.value_type=4,s.string+=l;break}if(0==s.value_type)0!==h&&31!==h&&ae(O);else{if(31===h||29===h){s.string+=l;break}if(2==I){if(29==h){s.string+=l;break}ee("Multiple values found in field name",O)}3==I&&ee("String unexpected",O)}}break;case 96:case 34:case 39:s.string&&(s.className=s.string),s.string="",ie(O)?(s.value_type=4,h=31):(F=O,$=!0);break;case 10:a.line++,a.col=1;case 32:case 9:case 13:case 8232:case 8233:case 65279:if(31==h){if(0==I){h=0,Y=!0;break}if(3==I){h=32;break}if(2==I){h=30;break}if(1==I){h=30;break}}if(0==h||30==h)break;29==h?s.string.length&&(h=30):h<31&&ae(O);break;case 116:0==h?h=1:27==h?h=28:ae(O);break;case 114:1==h?h=2:ae(O);break;case 117:2==h?h=3:9==h?h=10:0==h?h=12:ae(O);break;case 101:3==h?(s.value_type=2,h=31):8==h?(s.value_type=3,h=31):14==h?h=15:18==h?h=19:ae(O);break;case 110:0==h?h=9:12==h?h=13:17==h?h=18:22==h?h=23:25==h?h=26:ae(O);break;case 100:13==h?h=14:19==h?(s.value_type=-1,h=31):ae(O);break;case 105:16==h?h=17:24==h?h=25:26==h?h=27:ae(O);break;case 108:10==h?h=11:11==h?(s.value_type=1,h=31):6==h?h=7:ae(O);break;case 102:0==h?h=5:15==h?h=16:23==h?h=24:ae(O);break;case 97:5==h?h=6:20==h?h=21:ae(O);break;case 115:7==h?h=8:ae(O);break;case 73:0==h?h=22:ae(O);break;case 78:0==h?h=20:21==h?(s.value_type=m?7:8,m=!1,h=31):ae(O);break;case 121:28==h?(s.value_type=m?9:10,m=!1,h=31):ae(O);break;case 45:0==h?m=!m:ae(O);break;case 43:0!==h&&ae(O)}}if(Y){31==h&&(h=0);break}}if(o==Q.length?(p(K),$||U||2==I?Z=0:0!=I||0==s.value_type&&!v||(Y=!0,Z=1)):(K.n=o,J.unshift(K),Z=2),Y){k=null;break}}return y?(Y&&0!=s.value_type&&(h=0,v=ne(),m=!1,s.string="",s.value_type=0),Y=!1,Z):-1}}};const d=[Object.freeze(r.begin())];let m=0;function v(){return this&&this.valueOf()}r.parse=function(e,t){let n,s=m++;d.length<=s&&d.push(Object.freeze(r.begin())),n=d[s],"string"!=typeof e&&(e=String(e)),n.reset();const a=n._write(e,!0);if(a>0){let e=n.value();if(void 0===e&&a>1)throw new Error("Pending value could not complete");return e="function"==typeof t?function e(n,r){let s,a,i=n[r];if(i&&"object"==typeof i)for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a=e(i,s),void 0!==a?i[s]=a:delete i[s]);return t.call(n,r,i)}({"":e},""):e,m--,e}n.finalError()},r.defineClass=function(e,t){let n,r=Object.keys(t);for(let e=1;e<r.length;e++){let t,n;(t=r[e-1])>(n=r[e])&&(r[e-1]=n,r[e]=t,e?e-=2:e--)}y.push(n={name:e,tag:r.toString(),proto:Object.getPrototypeOf(t),fields:Object.keys(t)});for(let e=1;e<n.fields.length;e++)if(n.fields[e]<n.fields[e-1]){let t=n.fields[e-1];n.fields[e-1]=n.fields[e],n.fields[e]=t,e>1&&(e-=2)}n.proto===Object.getPrototypeOf({})&&(n.proto=null)},r.toJSOX=r.registerToJSOX=function(e,t,n){if(t.prototype&&t.prototype===Object.prototype){let r=Object.keys(t).toString();if(h.get(r))throw new Error("Existing toJSOX has been registered for object type");h.set(r,{external:!0,name:e,cb:n})}else{if(g.get(t.prototype))throw new Error("Existing toJSOX has been registered for prototype");g.set(t.prototype,{external:!0,name:e||n.constructor.name,cb:n})}},r.fromJSOX=function(e,t,n){if(t||(t=function(){}.prototype),b.get(e))throw new Error("Existing fromJSOX has been registered for prototype");if(t&&!("constructor"in t))throw new Error("Please pass a prototype like thing...");b.set(e,{protoCon:t.prototype.constructor,cb:n})},r.registerFromJSOX=function(e,t){throw new Error("deprecated; please adjust code to use fromJSOX:"+e+t.toString())},r.addType=function(e,t,n,s){r.toJSOX(e,t,n),r.fromJSOX(e,t,s)},r.registerToFrom=function(e,t){throw new Error("registerToFrom deprecated; please use addType:"+e+t.toString())},r.stringifier=function(){let e=[],t='"',i=new WeakMap;const o=[];let c=[];const u=new WeakMap,f=new Map;let p=null;const d=[];let m=!1;function k(e){return isNaN(e)?e in l||/([0-9-])/.test(e[0])||/((\n|\r|\t)|[ {}()<>!+*/.:,-])/.test(e)?t+r.escape(e)+t:e:["'",e.toString(),"'"].join("")}g.get(Object.prototype)||(g.set(Object.prototype,{external:!1,name:Object.prototype.constructor.name,cb:null}),g.set(Date.prototype,{external:!1,name:"Date",cb:function(){let e=-this.getTimezoneOffset(),t=e>=0?"+":"-",n=function(e){let t=Math.floor(Math.abs(e));return(t<10?"0":"")+t};return[this.getFullYear(),"-",n(this.getMonth()+1),"-",n(this.getDate()),"T",n(this.getHours()),":",n(this.getMinutes()),":",n(this.getSeconds()),"."+function(e){let t=Math.floor(Math.abs(e));return(t<100?"0":"")+(t<10?"0":"")+t}(this.getMilliseconds())+t,n(e/60),":",n(e%60)].join("")}}),g.set(Boolean.prototype,{external:!1,name:"Boolean",cb:v}),g.set(Number.prototype,{external:!1,name:"Number",cb:function(){return isNaN(this)?"NaN":isFinite(this)?String(this):this<0?"-Infinity":"Infinity"}}),g.set(String.prototype,{external:!1,name:"String",cb:function(){return'"'+r.escape(v.apply(this))+'"'}}),"function"==typeof BigInt&&g.set(BigInt.prototype,{external:!1,name:"BigInt",cb:function(){return this+"n"}}),g.set(ArrayBuffer.prototype,{external:!0,name:"ab",cb:function(){return"["+k(x(this))+"]"}}),g.set(Uint8Array.prototype,{external:!0,name:"u8",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Uint8ClampedArray.prototype,{external:!0,name:"uc8",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Int8Array.prototype,{external:!0,name:"s8",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Uint16Array.prototype,{external:!0,name:"u16",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Int16Array.prototype,{external:!0,name:"s16",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Uint32Array.prototype,{external:!0,name:"u32",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Int32Array.prototype,{external:!0,name:"s32",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Float32Array.prototype,{external:!0,name:"f32",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Float64Array.prototype,{external:!0,name:"f64",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(Float64Array.prototype,{external:!0,name:"f64",cb:function(){return"["+k(x(this.buffer))+"]"}}),g.set(RegExp.prototype,a={external:!0,name:"regex",cb:function(e,t){return"'"+escape(this.source)+"'"}}),b.set("regex",{protoCon:RegExp,cb:function(e,t){return new RegExp(this)}}),g.set(Map.prototype,a={external:!0,name:"map",cb:null}),b.set("map",{protoCon:Map,cb:function(e,t){if(!e)return this;this.set(e,t)}}),g.set(Array.prototype,s={external:!1,name:Array.prototype.constructor.name,cb:null}));const w={defineClass(t,n){let r,s=Object.keys(n);for(let e=1;e<s.length;e++){let t,n;(t=s[e-1])>(n=s[e])&&(s[e-1]=n,s[e]=t,e?e-=2:e--)}e.push(r={name:t,tag:s.toString(),proto:Object.getPrototypeOf(n),fields:Object.keys(n)});for(let e=1;e<r.fields.length;e++)if(r.fields[e]<r.fields[e-1]){let t=r.fields[e-1];r.fields[e-1]=r.fields[e],r.fields[e]=t,e>1&&(e-=2)}r.proto===Object.getPrototypeOf({})&&(r.proto=null)},setDefaultObjectToJSOX(e){p=e},isEncoding:e=>!!c.find((t,n)=>t===e&&n<c.length-1),encodeObject(e){return p?p.apply(e,[this]):e},stringify:(t,n,r)=>function(t,n,r){if(void 0===t)return"undefined";if(null===t)return;let l,b,v,x,O=!0;const j=typeof r,S=typeof n;if(l="",b="","number"===j)for(x=0;x<r;x+=1)b+=" ";else"string"===j&&(b=r);if(v=n,n&&"function"!==S&&("object"!==S||"number"!=typeof n.length))throw new Error("JSOX.stringify");o.length=0,i=new WeakMap;const E=function t(n,r){function i(){let e,n=[],r=o.length;for(let e=0;e<this.length;e+=1)o[r]=e,n[e]=t(e,this)||"null";return o.length=r,c.length=r,e=0===n.length?"[]":l?["[\n",l,n.join(",\n"+l),"\n",P,"]"].join(""):"["+n.join(",")+"]",e}function x(){let e={tmp:null},n="{",r=!0;for(let[s,a]of this){e.tmp=a;let i=o.length;o[i]=s,n+=(r?"":",")+k(s)+":"+t("tmp",e),o.length=i,r=!1}return n+="}",n}O&&(s.cb=i,a.cb=x,O=!1);let j,S,E,A,I,T,D,P=l,C=o.length,M=r[n],X="object"==typeof M;X&&null!==M&&p&&(d.find(e=>e===M)||(d.push(M),c[C]=M,M=p.apply(M,[w]),X="object"==typeof M,d.pop(),c.length=C,X="object"==typeof M));const J=null!=M&&Object.getPrototypeOf(M);let F=J&&(u.get(J)||g.get(J)||null),$=!F&&null!=M&&(f.get(Object.keys(M).toString())||h.get(Object.keys(M).toString())||null),U=F&&F.cb||$&&$.cb;if(null!=M&&"function"==typeof U){if(l+=b,"object"==typeof M&&(E=_(M),E))return"ref"+E;let e=U.call(M,w);M=e,l=P}else if("object"==typeof M&&(E=_(M),E))return"ref"+E;switch("function"==typeof v&&(M=v.call(r,n,M)),typeof M){case"bigint":return M+"n";case"string":case"number":{let t="";return""===n&&(t=e.map(e=>e.name+"{"+e.fields.join(",")+"}").join(l?"\n":"")+y.map(e=>e.name+"{"+e.fields.join(",")+"}").join(l?"\n":"")+(l?"\n":"")),F&&F.external?t+F.name+M:$&&$.external?t+$.name+M:t+M}case"boolean":case"null":return String(M);case"object":if(E)return"ref"+E;if(!M)return"null";if(l+=b,I=null,T=[],v&&"object"==typeof v){for(A=v.length,I=N(M,v),j=0;j<A;j+=1)"string"==typeof v[j]&&(S=v[j],o[C]=S,E=t(S,M),E&&(I?T.push(E):T.push(k(S)+(l?": ":":")+E)));o.splice(C,1)}else{I=N(M);let e=[];for(S in M)if((!m||Object.prototype.propertyIsEnumerable.call(M,S))&&Object.prototype.hasOwnProperty.call(M,S)){let t;for(t=0;t<e.length;t++)if(e[t]>S){e.splice(t,0,S);break}t==e.length&&e.push(S)}for(let n=0;n<e.length;n++)S=e[n],Object.prototype.hasOwnProperty.call(M,S)&&(o[C]=S,E=t(S,M),E&&(I?T.push(E):T.push(k(S)+(l?": ":":")+E)));o.splice(C,1)}D=""===n?(e.map(e=>e.name+"{"+e.fields.join(",")+"}").join(l?"\n":"")||y.map(e=>e.name+"{"+e.fields.join(",")+"}").join(l?"\n":""))+(l?"\n":""):"",F&&F.external&&(D+=k(F.name));let r=null;return I&&(r=k(I.name)),E=D+(0===T.length?"{}":l?(I?r:"")+"{\n"+l+T.join(",\n"+l)+"\n"+P+"}":(I?r:"")+"{"+T.join(",")+"}"),l=P,E}}("",{"":t});return y.length=0,E}(t,n,r),setQuote(e){t=e},registerToJSOX(e,t,n){return this.toJSOX(e,t,n)},toJSOX(e,t,n){if(t.prototype&&t.prototype!==Object.prototype){if(u.get(t.prototype))throw new Error("Existing toJSOX has been registered for prototype");u.set(t.prototype,{external:!0,name:e||n.constructor.name,cb:n})}else{let r=Object.keys(t).toString();if(f.get(r))throw new Error("Existing toJSOX has been registered for object type");f.set(r,{external:!0,name:e,cb:n})}},get ignoreNonEnumerable(){return m},set ignoreNonEnumerable(e){m=e}};return w;function _(e){if(null===e)return;let t=i.get(e);if(t)return t;i.set(e,n.stringify(o))}function N(t,n){let r,s,a=Object.getPrototypeOf(t);if(s=e.find(e=>{if(e.proto&&e.proto===a)return!0}),s)return s;if(e.length||y.length){if(n)n=n.map(e=>"string"==typeof e?e:void 0),r=n.toString();else{let e=Object.keys(t);for(let t=1;t<e.length;t++){let n,r;(n=e[t-1])>(r=e[t])&&(e[t-1]=r,e[t]=n,t?t-=2:t--)}r=e.toString()}s=e.find(e=>{if(e.tag===r)return!0}),s||(s=y.find(e=>{if(e.tag===r)return!0}))}return s}};const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$_",w={"~":-1,"=":-1,$:62,_:63,"+":62,"-":62,".":62,"/":63,",":63};for(let e=0;e<256;e++)e<64&&(w[k[e]]=e);function x(e){let t,n,r,s,a,i="",l=new Uint8Array(e),o=l.byteLength,c=o%3,u=o-c;for(let e=0;e<u;e+=3)a=l[e]<<16|l[e+1]<<8|l[e+2],t=(16515072&a)>>18,n=(258048&a)>>12,r=(4032&a)>>6,s=63&a,i+=k[t]+k[n]+k[r]+k[s];return 1==c?(a=l[u],t=(252&a)>>2,n=(3&a)<<4,i+=k[t]+k[n]+"=="):2==c&&(a=l[u]<<8|l[u+1],t=(64512&a)>>10,n=(1008&a)>>4,r=(15&a)<<2,i+=k[t]+k[n]+k[r]+"="),i}function _(e){let t;t=e.length%4==1?3*((e.length+3)/4|0)-3:e.length%4==2?3*((e.length+3)/4|0)-2:e.length%4==3?3*((e.length+3)/4|0)-1:-1==w[e[e.length-3]]?3*((e.length+3)/4|0)-3:-1==w[e[e.length-2]]?3*((e.length+3)/4|0)-2:-1==w[e[e.length-1]]?3*((e.length+3)/4|0)-1:3*((e.length+3)/4|0);let n,r=new ArrayBuffer(t),s=new Uint8Array(r),a=e.length+3>>2;for(n=0;n<a;n++){let t=w[e[4*n]],r=4*n+1<e.length?w[e[4*n+1]]:-1,a=r>=0&&4*n+2<e.length?w[e[4*n+2]]:-1,i=a>=0&&4*n+3<e.length?w[e[4*n+3]]:-1;r>=0&&(s[3*n+0]=t<<2|r>>4),a>=0&&(s[3*n+1]=r<<4|a>>2&15),i>=0&&(s[3*n+2]=a<<6|63&i)}return r}Object.freeze(w),r.stringify=function(e,t,n){return r.stringifier().stringify(e,t,n)},[[0,256,[16767487,16739071,130048,3670016,0,16777208,16777215,8388607]]].map(e=>({firstChar:e[0],lastChar:e[1],bits:e[2]}))}()}(e={exports:{}},e.exports),e.exports);export default t;
